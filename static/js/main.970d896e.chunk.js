(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){e.exports=n(279)},142:function(e,t,n){},144:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(25),l=n.n(o),c=(n(142),n(22)),s=n(29),i=n(31),u=n(30),h=n(32),d=(n(144),n(288)),p=n(285),m=n(291),f=n(287),g=n(119),x=n(289),C=n(286),y=n(77),w=1.5,v=[{name:"red",hex:"#C70039"},{name:"yellow",hex:"#FFC300"},{name:"white",hex:"#DEECEE"},{name:"green",hex:"#0BB02C"},{name:"cyan",hex:"#10ECF3"},{name:"blue",hex:"#103DF3"},{name:"purple",hex:"#F310D4"}],E="p1",b="p2",P=function(e){var t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),{r:(t="0x"+t.join(""))>>16&255,g:t>>8&255,b:255&t,a:1};throw new Error("Bad Hex")},O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).isStartingCell=function(){return n.state.cell.isCurrentCell(0,0)},n.calcBorderSize=function(){return n.state.cell.isCurrentCell(0,0)||n.state.cell.isCurrentCell(n.state.xmax,n.state.ymax)?"3px":"1px"},n.calcBorderColor=function(){return n.state.cell.isCurrentCell(0,0)?"#C0A3B5":n.state.cell.isCurrentCell(n.state.xmax,n.state.ymax)?"#A3C0AE":"grey"},n.state={cell:e.cell,xmax:e.XMax,ymax:e.YMax},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.calcBorderSize(),t=this.calcBorderColor(),n=a.a.createElement("span",null),r={fontSize:"50%"};if(this.state.cell)switch(this.state.cell.owner){case E:n=a.a.createElement(g.a,{name:"fly",style:r});break;case b:n=a.a.createElement(g.a,{name:"sun",style:r})}var o=P(this.state.cell.color.hex);return a.a.createElement("div",{className:"cell",style:{background:"linear-gradient(141deg, #2c3340 0%, rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", 0.6) 51%, ").concat(this.state.cell.color.hex," 75%)"),height:"".concat(w,"rem"),width:"".concat(w,"rem"),border:"".concat(e," groove ").concat(t),textAlign:"center",display:"flex"}},this.props.ownerDisplay&&n)}}]),t}(a.a.Component),B=function e(t,n,r,a){var o=this;Object(c.a)(this,e),this.isCurrentCell=function(e,t){return o.X===e&&o.Y===t},this.changeColor=function(e){o.color.hex!==e.hex&&(o.color=e)},this.displayName=function(){return"{X:".concat(o.X,", Y:").concat(o.Y,", Owner: ").concat(o.owner,", Color: ").concat(o.color.name,"}")},this.isOwnedBy=function(e){return o.owner&&o.owner===e},this.color=t,this.X=n,this.Y=r,this.owner=a},N=function(e){return a.a.createElement(d.a,{horizontal:!0,inverted:!0,size:"mini"},a.a.createElement(d.a.Value,null,e.toFixed(2)),a.a.createElement(d.a.Label,null,"%"))},k=function(e,t){return 100*e/t},j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).randomColor=function(){return v[Math.floor(Math.random()*v.length)]},n.reset=function(e,t){var r={name:"empty",hex:"0"};n.setState({cells:[],currentColorP1:r,currentColorP2:r,currentPlayer:E,completeP1:0,completeP2:0,nextMove:{hex:"0",cnt:0},won:!1,wonName:""},function(){return n.generateGrid(e,t)})},n.startGame=function(e,t){n.reset(e,t)},n.generateGrid=function(e,t){for(var r=0;r<=t;r++)for(var a=0;a<=e;a++){"undefined"===typeof n.state.cells[r]&&(n.state.cells[r]=[]);var o=n.randomColor();if(0===r&&0===a&&n.setState({currentColor:o,currentColorP1:o}),r===t&&a===e){for(;o.hex===n.state.currentColorP1;)o=n.randomColor();n.setState({currentColorP2:o})}var l=new B(o,a,r,0===r&&0===a?E:r===t&&a===e?b:"");n.state.cells[r][a]=l}},n.findBestMoveHex=function(e,t){var r=[];v.filter(function(t){return e.findIndex(function(e){return e.hex===t.hex})<0}).forEach(function(e){for(var a=[],o=[],l=0;l<=n.props.height;l++)for(var c=0;c<=n.props.width;c++)n.state.cells[l][c].isOwnedBy(t)&&o.push({x:c,y:l});if(t===E)for(var s=0;s<=n.props.height;s++)for(var i=0;i<=n.props.width;i++)n.cellIsConnectedNeighbor(i,s,e,o.concat(a),t)&&a.push({x:i,y:s});else for(var u=n.props.height;u>=0;u--)for(var h=n.props.width;h>=0;h--)n.cellIsConnectedNeighbor(h,u,e,o.concat(a),t)&&a.push({x:h,y:u});r.push({color:e.hex,changes:a.length})});var a=r.reduce(function(e,t){return e.changes>t.changes?e:t});return a?{hex:a.color,cnt:a.changes}:{hex:"0",cnt:0}},n.updateStatsForPlayer=function(e){for(var t=0,r=0;r<=n.props.height;r++)for(var a=0;a<=n.props.width;a++)n.state.cells[r][a].isOwnedBy(e)&&t++;var o=k(t,n.props.height*n.props.width);n.setState({completeP1:e===E?o:n.state.completeP1,completeP2:e===b?o:n.state.completeP2,won:o>=50,wonName:o>=50?e:""})},n.changeColor=function(e){var t=n.state.currentPlayer,r=n.findNewCells(e,t,[]),a=0,o=!0,l=!1,c=void 0;try{for(var s,i=r[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var u=s.value,h=n.state.cells[u.y][u.x];h.isOwnedBy(t)||a++,h.color=e,h.owner=t}}catch(m){l=!0,c=m}finally{try{o||null==i.return||i.return()}finally{if(l)throw c}}n.updateStatsForPlayer(t),n.notifyChangedCells(a);var d=[e,t===E?n.state.currentColorP2:n.state.currentColorP1],p=n.findBestMoveHex(d,t===E?b:E);n.setState({currentColorP1:t===E?e:n.state.currentColorP1,currentColorP2:t===b?e:n.state.currentColorP2,nextMove:p,currentPlayer:t===E?b:E},function(){if(n.state.useCPU&&n.state.currentPlayer===b){var e=v.find(function(e){return e.hex===p.hex});setTimeout(n.changeColor,1200,e)}})},n.findNewCells=function(e,t,r){var a=0,o=t===E?n.state.currentColorP1:n.state.currentColorP2;if(!o||o.hex!==e.hex)if(t===E)for(var l=function(o){for(var l=function(l){var c=n.state.cells[o][l];return 0===o&&0===l?(r.push({x:l,y:o}),"continue"):c.owner&&c.isOwnedBy(t)?(r.push({x:l,y:o}),"continue"):n.cellIsConnectedNeighbor(l,o,e,r,t)?(r.findIndex(function(e){return e.x===l&&e.y===o})<0&&(a++,r.push({x:l,y:o})),"continue"):void 0},c=0;c<=n.props.width;c++)l(c)},c=0;c<=n.props.height;c++)l(c);else{var s=function(o){for(var l=function(l){var c=n.state.cells[o][l];return o===n.props.height&&l===n.props.width?(r.push({x:l,y:o}),"continue"):c.owner&&c.isOwnedBy(t)?(r.push({x:l,y:o}),"continue"):n.cellIsConnectedNeighbor(l,o,e,r,t)?(r.findIndex(function(e){return e.x===l&&e.y===o})<0&&(a++,r.push({x:l,y:o})),"continue"):void 0},c=n.props.width;c>=0;c--)l(c)};for(c=n.props.height;c>=0;c--)s(c)}return a>0&&n.findNewCells(e,t,r),r},n.cellIsConnectedNeighbor=function(e,t,r,a,o){var l=n.state.cells[t][e];if(l.color.hex!==r.hex)return!1;if(e-1>=0){var c=t,s=e-1;if(n.state.cells[c][s].isOwnedBy(o)||a.findIndex(function(e){return e.x===s&&e.y===c})>=0)return n.state.debug&&console.log("N-LEFT: ".concat(l.displayName())),!0}if(e+1<=n.props.width){var i=t,u=e+1;if(n.state.cells[i][u].isOwnedBy(o)||a.findIndex(function(e){return e.x===u&&e.y===i})>=0)return n.state.debug&&console.log("N-RIGHT: ".concat(l.displayName())),!0}if(t-1>=0){var h=t-1,d=e;if(n.state.cells[h][d].isOwnedBy(o)||a.findIndex(function(e){return e.x===d&&e.y===h})>=0)return n.state.debug&&console.log("N-TOP: ".concat(l.displayName())),!0}if(t+1<=n.props.height){var p=t+1,m=e;if(n.state.cells[p][m].isOwnedBy(o)||a.findIndex(function(e){return e.x===m&&e.y===p})>=0)return n.state.debug&&console.log("N-BOTTOM: ".concat(l.displayName())),!0}return!1},n.notifyChangedCells=function(e){return y.toast.info("".concat(e," !"),{position:"bottom-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},n.renderWinnerGrid=function(){return a.a.createElement("div",{style:{width:"".concat(w*n.props.width,"rem"),height:"".concat(w*n.props.height,"rem"),backgroundColor:"#729CEE",color:"#EEC472",display:"flex",alignItems:"center",justifyContent:"center"}},a.a.createElement("span",{style:{fontSize:"3rem"}},"Winner: ",n.state.wonName))},n.renderGrid=function(){var e=[];if(!n.state.cells||0===n.state.cells.length)return e;for(var t=0;t<=n.props.height;t++){for(var r=[],o=0;o<=n.props.width;o++){var l=n.state.cells[t][o];r.push(a.a.createElement("td",{key:"x_".concat(o)},a.a.createElement(O,Object.assign({},n.props,{cell:l,YMax:n.props.height,XMax:n.props.width,ownerDisplay:n.state.displayOwner}))))}e.push(a.a.createElement("tr",{key:"y_".concat(t)},r))}return e},n.toggleDisplayOwner=function(){return n.setState({displayOwner:!n.state.displayOwner})},n.toggleDisplayPoss=function(){return n.setState({displayPoss:!n.state.displayPoss})},n.toggleUseCPU=function(){return n.setState({useCPU:!n.state.useCPU})},n.state={height:e.height*w,width:e.width*w,currentColorP1:{name:"empty",hex:"0"},currentColorP2:{name:"empty",hex:"0"},currentPlayer:E,completeP1:0,completeP2:0,nextMove:{hex:"0",cnt:0},won:!1,wonName:"",displayOwner:!1,displayPoss:!1,useCPU:!0,debug:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.startGame(this.props.width,this.props.height)}},{key:"render",value:function(){var e=this;return a.a.createElement(p.a,{centered:!0},a.a.createElement(m.a,{centered:!0,columns:3,verticalAlign:"middle"},a.a.createElement(m.a.Row,{verticalAlign:"middle"},a.a.createElement(m.a.Column,null,a.a.createElement(m.a,{centered:!0,verticalAlign:"middle"},!this.state.won&&a.a.createElement("div",{className:"board"},a.a.createElement("table",null,a.a.createElement("tbody",null,this.renderGrid()))),this.state.won&&this.renderWinnerGrid()))),a.a.createElement(m.a.Row,{centered:!0,columns:v.length+8},v.map(function(t){return a.a.createElement(m.a.Column,{key:t.name},a.a.createElement(f.a,{style:{background:e.state.currentColorP1.hex===t.hex||e.state.currentColorP2.hex===t.hex?"#23272E":"linear-gradient(141deg, #2c3340 0%, rgba(".concat(P(t.hex).r,", ").concat(P(t.hex).g,", ").concat(P(t.hex).b,", 0.6) 51%, ").concat(t.hex," 75%)"),border:e.state.nextMove&&e.state.nextMove.hex===t.hex?"3px solid #785807":"none"},onClick:function(){return e.changeColor(t)},diabled:e.state.currentColorP1.hex===t.hex||e.state.currentColorP2.hex===t.hex||e.state.won},e.state.displayPoss&&e.state.nextMove.hex===t.hex?e.state.nextMove.cnt:"","\xa0"))})),a.a.createElement(m.a.Row,{verticalAlign:"middle"},a.a.createElement(m.a.Column,null,a.a.createElement(m.a,{relaxed:!0},a.a.createElement(m.a.Row,null,a.a.createElement(m.a.Column,null,this.state.currentPlayer===E&&a.a.createElement(g.a,{name:"chevron circle right"})),a.a.createElement(m.a.Column,null,E),a.a.createElement(m.a.Column,null,N(this.state.completeP1))),a.a.createElement(m.a.Row,null,a.a.createElement(m.a.Column,null,this.state.currentPlayer===b&&a.a.createElement(g.a,{name:"chevron circle right"})),a.a.createElement(m.a.Column,null,this.state.useCPU?"cp":b),a.a.createElement(m.a.Column,null,N(this.state.completeP2))))),a.a.createElement(m.a.Column,null,a.a.createElement(x.a,null,a.a.createElement(C.a,{label:"Display owner",toggle:!0,onChange:this.toggleDisplayOwner}),a.a.createElement(C.a,{label:"Display possibilities",toggle:!0,onChange:this.toggleDisplayPoss}),a.a.createElement(C.a,{label:"Play against CPU",toggle:!0,onChange:this.toggleUseCPU,defaultChecked:!0}))),a.a.createElement(m.a.Column,null,a.a.createElement(f.a,{onClick:function(){return e.startGame(e.props.width,e.props.height)}},"New Game")))),a.a.createElement(y.ToastContainer,{position:"bottom-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}))}}]),t}(a.a.Component),M=n(290),S=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App-header",style:{minHeight:"100vh"}},a.a.createElement(M.a,{as:"h2",inverted:!0},"Filler by Robin"),a.a.createElement(j,{height:20,width:20}))}}]),t}(r.Component);n(274),n(277),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,2,1]]]);
//# sourceMappingURL=main.970d896e.chunk.js.map